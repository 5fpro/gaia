var data = [{"city":{"name":"臺北市","type_name":"直轄市"},"dists":[{"name":"中正區","type_name":"區","zipcode":"100"},{"name":"大同區","type_name":"區","zipcode":"103"},{"name":"中山區","type_name":"區","zipcode":"104"},{"name":"松山區","type_name":"區","zipcode":"105"},{"name":"大安區","type_name":"區","zipcode":"106"},{"name":"萬華區","type_name":"區","zipcode":"108"},{"name":"信義區","type_name":"區","zipcode":"110"},{"name":"士林區","type_name":"區","zipcode":"111"},{"name":"北投區","type_name":"區","zipcode":"112"},{"name":"內湖區","type_name":"區","zipcode":"114"},{"name":"南港區","type_name":"區","zipcode":"115"},{"name":"文山區","type_name":"區","zipcode":"116"}]},{"city":{"name":"新北市","type_name":"直轄市"},"dists":[{"name":"板橋區","type_name":"區","zipcode":"220"},{"name":"新莊區","type_name":"區","zipcode":"242"},{"name":"中和區","type_name":"區","zipcode":"235"},{"name":"永和區","type_name":"區","zipcode":"234"},{"name":"土城區","type_name":"區","zipcode":"236"},{"name":"樹林區","type_name":"區","zipcode":"238"},{"name":"三峽區","type_name":"區","zipcode":"237"},{"name":"鶯歌區","type_name":"區","zipcode":"239"},{"name":"三重區","type_name":"區","zipcode":"241"},{"name":"蘆洲區","type_name":"區","zipcode":"247"},{"name":"五股區","type_name":"區","zipcode":"248"},{"name":"泰山區","type_name":"區","zipcode":"243"},{"name":"林口區","type_name":"區","zipcode":"244"},{"name":"八里區","type_name":"區","zipcode":"249"},{"name":"淡水區","type_name":"區","zipcode":"251"},{"name":"三芝區","type_name":"區","zipcode":"252"},{"name":"石門區","type_name":"區","zipcode":"253"},{"name":"金山區","type_name":"區","zipcode":"208"},{"name":"萬里區","type_name":"區","zipcode":"207"},{"name":"汐止區","type_name":"區","zipcode":"221"},{"name":"瑞芳區","type_name":"區","zipcode":"224"},{"name":"貢寮區","type_name":"區","zipcode":"228"},{"name":"平溪區","type_name":"區","zipcode":"226"},{"name":"雙溪區","type_name":"區","zipcode":"227"},{"name":"新店區","type_name":"區","zipcode":"231"},{"name":"深坑區","type_name":"區","zipcode":"222"},{"name":"石碇區","type_name":"區","zipcode":"223"},{"name":"坪林區","type_name":"區","zipcode":"232"},{"name":"烏來區","type_name":"原民區","zipcode":"233"}]},{"city":{"name":"桃園市","type_name":"直轄市"},"dists":[{"name":"桃園區","type_name":"區","zipcode":"330"},{"name":"中壢區","type_name":"區","zipcode":"320"},{"name":"平鎮區","type_name":"區","zipcode":"324"},{"name":"八德區","type_name":"區","zipcode":"334"},{"name":"楊梅區","type_name":"區","zipcode":"326"},{"name":"蘆竹區","type_name":"區","zipcode":"338"},{"name":"大溪區","type_name":"區","zipcode":"335"},{"name":"龍潭區","type_name":"區","zipcode":"325"},{"name":"龜山區","type_name":"區","zipcode":"333"},{"name":"大園區","type_name":"區","zipcode":"337"},{"name":"觀音區","type_name":"區","zipcode":"328"},{"name":"新屋區","type_name":"區","zipcode":"327"},{"name":"復興區","type_name":"原民區","zipcode":"336"}]},{"city":{"name":"臺中市","type_name":"直轄市"},"dists":[{"name":"中區","type_name":"區","zipcode":"400"},{"name":"東區","type_name":"區","zipcode":"401"},{"name":"南區","type_name":"區","zipcode":"402"},{"name":"西區","type_name":"區","zipcode":"403"},{"name":"北區","type_name":"區","zipcode":"404"},{"name":"北屯區","type_name":"區","zipcode":"406"},{"name":"西屯區","type_name":"區","zipcode":"407"},{"name":"南屯區","type_name":"區","zipcode":"408"},{"name":"太平區","type_name":"區","zipcode":"411"},{"name":"大里區","type_name":"區","zipcode":"412"},{"name":"霧峰區","type_name":"區","zipcode":"413"},{"name":"烏日區","type_name":"區","zipcode":"414"},{"name":"豐原區","type_name":"區","zipcode":"420"},{"name":"后里區","type_name":"區","zipcode":"421"},{"name":"石岡區","type_name":"區","zipcode":"422"},{"name":"東勢區","type_name":"區","zipcode":"423"},{"name":"新社區","type_name":"區","zipcode":"426"},{"name":"潭子區","type_name":"區","zipcode":"427"},{"name":"大雅區","type_name":"區","zipcode":"428"},{"name":"神岡區","type_name":"區","zipcode":"429"},{"name":"大肚區","type_name":"區","zipcode":"432"},{"name":"沙鹿區","type_name":"區","zipcode":"433"},{"name":"龍井區","type_name":"區","zipcode":"434"},{"name":"梧棲區","type_name":"區","zipcode":"435"},{"name":"清水區","type_name":"區","zipcode":"436"},{"name":"大甲區","type_name":"區","zipcode":"437"},{"name":"外埔區","type_name":"區","zipcode":"438"},{"name":"大安區","type_name":"區","zipcode":"439"},{"name":"和平區","type_name":"原民區","zipcode":"424"}]},{"city":{"name":"臺南市","type_name":"直轄市"},"dists":[{"name":"中西區","type_name":"區","zipcode":"700"},{"name":"東區","type_name":"區","zipcode":"701"},{"name":"南區","type_name":"區","zipcode":"702"},{"name":"北區","type_name":"區","zipcode":"704"},{"name":"安平區","type_name":"區","zipcode":"708"},{"name":"安南區","type_name":"區","zipcode":"709"},{"name":"永康區","type_name":"區","zipcode":"710"},{"name":"歸仁區","type_name":"區","zipcode":"711"},{"name":"新化區","type_name":"區","zipcode":"712"},{"name":"左鎮區","type_name":"區","zipcode":"713"},{"name":"玉井區","type_name":"區","zipcode":"714"},{"name":"楠西區","type_name":"區","zipcode":"715"},{"name":"南化區","type_name":"區","zipcode":"716"},{"name":"仁德區","type_name":"區","zipcode":"717"},{"name":"關廟區","type_name":"區","zipcode":"718"},{"name":"龍崎區","type_name":"區","zipcode":"719"},{"name":"官田區","type_name":"區","zipcode":"720"},{"name":"麻豆區","type_name":"區","zipcode":"721"},{"name":"佳里區","type_name":"區","zipcode":"722"},{"name":"西港區","type_name":"區","zipcode":"723"},{"name":"七股區","type_name":"區","zipcode":"724"},{"name":"將軍區","type_name":"區","zipcode":"725"},{"name":"學甲區","type_name":"區","zipcode":"726"},{"name":"北門區","type_name":"區","zipcode":"727"},{"name":"新營區","type_name":"區","zipcode":"730"},{"name":"後壁區","type_name":"區","zipcode":"731"},{"name":"白河區","type_name":"區","zipcode":"732"},{"name":"東山區","type_name":"區","zipcode":"733"},{"name":"六甲區","type_name":"區","zipcode":"734"},{"name":"下營區","type_name":"區","zipcode":"735"},{"name":"柳營區","type_name":"區","zipcode":"736"},{"name":"鹽水區","type_name":"區","zipcode":"737"},{"name":"善化區","type_name":"區","zipcode":"741"},{"name":"大內區","type_name":"區","zipcode":"742"},{"name":"山上區","type_name":"區","zipcode":"743"},{"name":"新市區","type_name":"區","zipcode":"744"},{"name":"安定區","type_name":"區","zipcode":"745"}]},{"city":{"name":"高雄市","type_name":"直轄市"},"dists":[{"name":"楠梓區","type_name":"區","zipcode":"811"},{"name":"左營區","type_name":"區","zipcode":"813"},{"name":"鼓山區","type_name":"區","zipcode":"804"},{"name":"三民區","type_name":"區","zipcode":"807"},{"name":"鹽埕區","type_name":"區","zipcode":"803"},{"name":"前金區","type_name":"區","zipcode":"801"},{"name":"新興區","type_name":"區","zipcode":"800"},{"name":"苓雅區","type_name":"區","zipcode":"802"},{"name":"前鎮區","type_name":"區","zipcode":"806"},{"name":"旗津區","type_name":"區","zipcode":"805"},{"name":"小港區","type_name":"區","zipcode":"812"},{"name":"鳳山區","type_name":"區","zipcode":"830"},{"name":"大寮區","type_name":"區","zipcode":"831"},{"name":"鳥松區","type_name":"區","zipcode":"833"},{"name":"林園區","type_name":"區","zipcode":"832"},{"name":"仁武區","type_name":"區","zipcode":"814"},{"name":"大樹區","type_name":"區","zipcode":"840"},{"name":"大社區","type_name":"區","zipcode":"815"},{"name":"岡山區","type_name":"區","zipcode":"820"},{"name":"路竹區","type_name":"區","zipcode":"821"},{"name":"橋頭區","type_name":"區","zipcode":"825"},{"name":"梓官區","type_name":"區","zipcode":"826"},{"name":"彌陀區","type_name":"區","zipcode":"827"},{"name":"永安區","type_name":"區","zipcode":"828"},{"name":"燕巢區","type_name":"區","zipcode":"824"},{"name":"田寮區","type_name":"區","zipcode":"823"},{"name":"阿蓮區","type_name":"區","zipcode":"822"},{"name":"茄萣區","type_name":"區","zipcode":"852"},{"name":"湖內區","type_name":"區","zipcode":"829"},{"name":"旗山區","type_name":"區","zipcode":"842"},{"name":"美濃區","type_name":"區","zipcode":"843"},{"name":"內門區","type_name":"區","zipcode":"845"},{"name":"杉林區","type_name":"區","zipcode":"846"},{"name":"甲仙區","type_name":"區","zipcode":"847"},{"name":"六龜區","type_name":"區","zipcode":"844"},{"name":"茂林區","type_name":"原民區","zipcode":"851"},{"name":"桃源區","type_name":"原民區","zipcode":"848"},{"name":"那瑪夏區","type_name":"原民區","zipcode":"849"}]},{"city":{"name":"基隆市","type_name":"直轄市"},"dists":[{"name":"仁愛區","type_name":"區","zipcode":"200"},{"name":"中正區","type_name":"區","zipcode":"202"},{"name":"信義區","type_name":"區","zipcode":"201"},{"name":"中山區","type_name":"區","zipcode":"203"},{"name":"安樂區","type_name":"區","zipcode":"204"},{"name":"暖暖區","type_name":"區","zipcode":"205"},{"name":"七堵區","type_name":"區","zipcode":"206"}]},{"city":{"name":"新竹市","type_name":"直轄市"},"dists":[{"name":"東區","type_name":"區","zipcode":"300"},{"name":"北區","type_name":"區","zipcode":"300"},{"name":"香山區","type_name":"區","zipcode":"300"}]},{"city":{"name":"嘉義市","type_name":"直轄市"},"dists":[{"name":"東區","type_name":"區","zipcode":"600"},{"name":"西區","type_name":"區","zipcode":"600"}]},{"city":{"name":"新竹縣","type_name":"直轄市"},"dists":[{"name":"竹北市","type_name":"市","zipcode":"302"},{"name":"竹東鎮","type_name":"鎮","zipcode":"310"},{"name":"新埔鎮","type_name":"鎮","zipcode":"305"},{"name":"關西鎮","type_name":"鎮","zipcode":"306"},{"name":"湖口鄉","type_name":"鄉","zipcode":"303"},{"name":"新豐鄉","type_name":"鄉","zipcode":"304"},{"name":"峨眉鄉","type_name":"鄉","zipcode":"315"},{"name":"寶山鄉","type_name":"鄉","zipcode":"308"},{"name":"北埔鄉","type_name":"鄉","zipcode":"314"},{"name":"芎林鄉","type_name":"鄉","zipcode":"307"},{"name":"橫山鄉","type_name":"鄉","zipcode":"312"},{"name":"尖石鄉","type_name":"原民鄉","zipcode":"313"},{"name":"五峰鄉","type_name":"原民鄉","zipcode":"311"}]},{"city":{"name":"苗栗縣","type_name":"直轄市"},"dists":[{"name":"苗栗市","type_name":"市","zipcode":"360"},{"name":"頭份市","type_name":"市","zipcode":"351"},{"name":"竹南鎮","type_name":"鎮","zipcode":"350"},{"name":"後龍鎮","type_name":"鎮","zipcode":"356"},{"name":"通霄鎮","type_name":"鎮","zipcode":"357"},{"name":"苑裡鎮","type_name":"鎮","zipcode":"358"},{"name":"卓蘭鎮","type_name":"鎮","zipcode":"369"},{"name":"造橋鄉","type_name":"鄉","zipcode":"361"},{"name":"西湖鄉","type_name":"鄉","zipcode":"368"},{"name":"頭屋鄉","type_name":"鄉","zipcode":"362"},{"name":"公館鄉","type_name":"鄉","zipcode":"363"},{"name":"銅鑼鄉","type_name":"鄉","zipcode":"366"},{"name":"三義鄉","type_name":"鄉","zipcode":"367"},{"name":"大湖鄉","type_name":"鄉","zipcode":"364"},{"name":"獅潭鄉","type_name":"鄉","zipcode":"354"},{"name":"三灣鄉","type_name":"鄉","zipcode":"352"},{"name":"南庄鄉","type_name":"鄉","zipcode":"353"},{"name":"泰安鄉","type_name":"原民鄉","zipcode":"365"}]},{"city":{"name":"彰化縣","type_name":"直轄市"},"dists":[{"name":"彰化市","type_name":"市","zipcode":"500"},{"name":"員林市","type_name":"市","zipcode":"510"},{"name":"和美鎮","type_name":"鎮","zipcode":"508"},{"name":"鹿港鎮","type_name":"鎮","zipcode":"505"},{"name":"溪湖鎮","type_name":"鎮","zipcode":"514"},{"name":"二林鎮","type_name":"鎮","zipcode":"526"},{"name":"田中鎮","type_name":"鎮","zipcode":"520"},{"name":"北斗鎮","type_name":"鎮","zipcode":"521"},{"name":"花壇鄉","type_name":"鄉","zipcode":"503"},{"name":"芬園鄉","type_name":"鄉","zipcode":"502"},{"name":"大村鄉","type_name":"鄉","zipcode":"515"},{"name":"永靖鄉","type_name":"鄉","zipcode":"512"},{"name":"伸港鄉","type_name":"鄉","zipcode":"509"},{"name":"線西鄉","type_name":"鄉","zipcode":"507"},{"name":"福興鄉","type_name":"鄉","zipcode":"506"},{"name":"秀水鄉","type_name":"鄉","zipcode":"504"},{"name":"埔心鄉","type_name":"鄉","zipcode":"513"},{"name":"埔鹽鄉","type_name":"鄉","zipcode":"516"},{"name":"大城鄉","type_name":"鄉","zipcode":"527"},{"name":"芳苑鄉","type_name":"鄉","zipcode":"528"},{"name":"竹塘鄉","type_name":"鄉","zipcode":"525"},{"name":"社頭鄉","type_name":"鄉","zipcode":"511"},{"name":"二水鄉","type_name":"鄉","zipcode":"530"},{"name":"田尾鄉","type_name":"鄉","zipcode":"522"},{"name":"埤頭鄉","type_name":"鄉","zipcode":"523"},{"name":"溪州鄉","type_name":"鄉","zipcode":"524"}]},{"city":{"name":"南投縣","type_name":"直轄市"},"dists":[{"name":"南投市","type_name":"市","zipcode":"540"},{"name":"埔里鎮","type_name":"鎮","zipcode":"545"},{"name":"草屯鎮","type_name":"鎮","zipcode":"542"},{"name":"竹山鎮","type_name":"鎮","zipcode":"557"},{"name":"集集鎮","type_name":"鎮","zipcode":"552"},{"name":"名間鄉","type_name":"鄉","zipcode":"551"},{"name":"鹿谷鄉","type_name":"鄉","zipcode":"558"},{"name":"中寮鄉","type_name":"鄉","zipcode":"541"},{"name":"魚池鄉","type_name":"鄉","zipcode":"555"},{"name":"國姓鄉","type_name":"鄉","zipcode":"544"},{"name":"水里鄉","type_name":"鄉","zipcode":"553"},{"name":"信義鄉","type_name":"原民鄉","zipcode":"556"},{"name":"仁愛鄉","type_name":"原民鄉","zipcode":"546"}]},{"city":{"name":"雲林縣","type_name":"直轄市"},"dists":[{"name":"斗六市","type_name":"市","zipcode":"640"},{"name":"斗南鎮","type_name":"鎮","zipcode":"630"},{"name":"虎尾鎮","type_name":"鎮","zipcode":"632"},{"name":"西螺鎮","type_name":"鎮","zipcode":"648"},{"name":"土庫鎮","type_name":"鎮","zipcode":"633"},{"name":"北港鎮","type_name":"鎮","zipcode":"651"},{"name":"林內鄉","type_name":"鄉","zipcode":"643"},{"name":"古坑鄉","type_name":"鄉","zipcode":"646"},{"name":"大埤鄉","type_name":"鄉","zipcode":"631"},{"name":"莿桐鄉","type_name":"鄉","zipcode":"647"},{"name":"褒忠鄉","type_name":"鄉","zipcode":"634"},{"name":"二崙鄉","type_name":"鄉","zipcode":"649"},{"name":"崙背鄉","type_name":"鄉","zipcode":"637"},{"name":"麥寮鄉","type_name":"鄉","zipcode":"638"},{"name":"臺西鄉","type_name":"鄉","zipcode":"636"},{"name":"東勢鄉","type_name":"鄉","zipcode":"635"},{"name":"元長鄉","type_name":"鄉","zipcode":"655"},{"name":"四湖鄉","type_name":"鄉","zipcode":"654"},{"name":"口湖鄉","type_name":"鄉","zipcode":"653"},{"name":"水林鄉","type_name":"鄉","zipcode":"652"}]},{"city":{"name":"嘉義縣","type_name":"直轄市"},"dists":[{"name":"太保市","type_name":"市","zipcode":"612"},{"name":"朴子市","type_name":"市","zipcode":"613"},{"name":"布袋鎮","type_name":"鎮","zipcode":"625"},{"name":"大林鎮","type_name":"鎮","zipcode":"622"},{"name":"民雄鄉","type_name":"鄉","zipcode":"621"},{"name":"溪口鄉","type_name":"鄉","zipcode":"623"},{"name":"新港鄉","type_name":"鄉","zipcode":"616"},{"name":"六腳鄉","type_name":"鄉","zipcode":"615"},{"name":"東石鄉","type_name":"鄉","zipcode":"614"},{"name":"義竹鄉","type_name":"鄉","zipcode":"624"},{"name":"鹿草鄉","type_name":"鄉","zipcode":"611"},{"name":"水上鄉","type_name":"鄉","zipcode":"608"},{"name":"中埔鄉","type_name":"鄉","zipcode":"606"},{"name":"竹崎鄉","type_name":"鄉","zipcode":"604"},{"name":"梅山鄉","type_name":"鄉","zipcode":"603"},{"name":"番路鄉","type_name":"鄉","zipcode":"602"},{"name":"大埔鄉","type_name":"鄉","zipcode":"607"},{"name":"阿里山鄉","type_name":"原民鄉","zipcode":"605"}]},{"city":{"name":"屏東縣","type_name":"直轄市"},"dists":[{"name":"屏東市","type_name":"市","zipcode":"900"},{"name":"潮州鎮","type_name":"鎮","zipcode":"920"},{"name":"東港鎮","type_name":"鎮","zipcode":"928"},{"name":"恆春鎮","type_name":"鎮","zipcode":"946"},{"name":"萬丹鄉","type_name":"鄉","zipcode":"913"},{"name":"長治鄉","type_name":"鄉","zipcode":"908"},{"name":"麟洛鄉","type_name":"鄉","zipcode":"909"},{"name":"九如鄉","type_name":"鄉","zipcode":"904"},{"name":"里港鄉","type_name":"鄉","zipcode":"905"},{"name":"鹽埔鄉","type_name":"鄉","zipcode":"907"},{"name":"高樹鄉","type_name":"鄉","zipcode":"906"},{"name":"萬巒鄉","type_name":"鄉","zipcode":"923"},{"name":"內埔鄉","type_name":"鄉","zipcode":"912"},{"name":"竹田鄉","type_name":"鄉","zipcode":"911"},{"name":"新埤鄉","type_name":"鄉","zipcode":"925"},{"name":"枋寮鄉","type_name":"鄉","zipcode":"940"},{"name":"新園鄉","type_name":"鄉","zipcode":"932"},{"name":"崁頂鄉","type_name":"鄉","zipcode":"924"},{"name":"林邊鄉","type_name":"鄉","zipcode":"927"},{"name":"南州鄉","type_name":"鄉","zipcode":"926"},{"name":"佳冬鄉","type_name":"鄉","zipcode":"931"},{"name":"琉球鄉","type_name":"鄉","zipcode":"929"},{"name":"車城鄉","type_name":"鄉","zipcode":"944"},{"name":"滿州鄉","type_name":"鄉","zipcode":"947"},{"name":"枋山鄉","type_name":"鄉","zipcode":"941"},{"name":"霧臺鄉","type_name":"原民鄉","zipcode":"902"},{"name":"瑪家鄉","type_name":"原民鄉","zipcode":"903"},{"name":"泰武鄉","type_name":"原民鄉","zipcode":"921"},{"name":"來義鄉","type_name":"原民鄉","zipcode":"922"},{"name":"春日鄉","type_name":"原民鄉","zipcode":"942"},{"name":"獅子鄉","type_name":"原民鄉","zipcode":"943"},{"name":"牡丹鄉","type_name":"原民鄉","zipcode":"945"},{"name":"三地門鄉","type_name":"原民鄉","zipcode":"901"}]},{"city":{"name":"宜蘭縣","type_name":"直轄市"},"dists":[{"name":"宜蘭市","type_name":"市","zipcode":"260"},{"name":"頭城鎮","type_name":"鎮","zipcode":"261"},{"name":"羅東鎮","type_name":"鎮","zipcode":"265"},{"name":"蘇澳鎮","type_name":"鎮","zipcode":"270"},{"name":"礁溪鄉","type_name":"鄉","zipcode":"262"},{"name":"壯圍鄉","type_name":"鄉","zipcode":"263"},{"name":"員山鄉","type_name":"鄉","zipcode":"264"},{"name":"冬山鄉","type_name":"鄉","zipcode":"269"},{"name":"五結鄉","type_name":"鄉","zipcode":"268"},{"name":"三星鄉","type_name":"鄉","zipcode":"266"},{"name":"大同鄉","type_name":"原民鄉","zipcode":"267"},{"name":"南澳鄉","type_name":"原民鄉","zipcode":"272"}]},{"city":{"name":"花蓮縣","type_name":"直轄市"},"dists":[{"name":"花蓮市","type_name":"市","zipcode":"970"},{"name":"鳳林鎮","type_name":"鎮","zipcode":"975"},{"name":"玉里鎮","type_name":"鎮","zipcode":"981"},{"name":"新城鄉","type_name":"鄉","zipcode":"971"},{"name":"吉安鄉","type_name":"鄉","zipcode":"973"},{"name":"壽豐鄉","type_name":"鄉","zipcode":"974"},{"name":"光復鄉","type_name":"鄉","zipcode":"976"},{"name":"豐濱鄉","type_name":"鄉","zipcode":"977"},{"name":"瑞穗鄉","type_name":"鄉","zipcode":"978"},{"name":"富里鄉","type_name":"鄉","zipcode":"983"},{"name":"秀林鄉","type_name":"原民鄉","zipcode":"972"},{"name":"萬榮鄉","type_name":"原民鄉","zipcode":"979"},{"name":"卓溪鄉","type_name":"原民鄉","zipcode":"982"}]},{"city":{"name":"臺東縣","type_name":"直轄市"},"dists":[{"name":"臺東市","type_name":"市","zipcode":"950"},{"name":"成功鎮","type_name":"鎮","zipcode":"961"},{"name":"關山鎮","type_name":"鎮","zipcode":"956"},{"name":"長濱鄉","type_name":"鄉","zipcode":"962"},{"name":"池上鄉","type_name":"鄉","zipcode":"958"},{"name":"東河鄉","type_name":"鄉","zipcode":"959"},{"name":"鹿野鄉","type_name":"鄉","zipcode":"955"},{"name":"卑南鄉","type_name":"鄉","zipcode":"954"},{"name":"大武鄉","type_name":"鄉","zipcode":"965"},{"name":"綠島鄉","type_name":"鄉","zipcode":"951"},{"name":"太麻里鄉","type_name":"鄉","zipcode":"963"},{"name":"海端鄉","type_name":"原民鄉","zipcode":"957"},{"name":"延平鄉","type_name":"原民鄉","zipcode":"953"},{"name":"金峰鄉","type_name":"原民鄉","zipcode":"964"},{"name":"達仁鄉","type_name":"原民鄉","zipcode":"966"},{"name":"蘭嶼鄉","type_name":"原民鄉","zipcode":"952"}]},{"city":{"name":"澎湖縣","type_name":"直轄市"},"dists":[{"name":"馬公市","type_name":"市","zipcode":"880"},{"name":"湖西鄉","type_name":"鄉","zipcode":"885"},{"name":"白沙鄉","type_name":"鄉","zipcode":"884"},{"name":"西嶼鄉","type_name":"鄉","zipcode":"881"},{"name":"望安鄉","type_name":"鄉","zipcode":"882"},{"name":"七美鄉","type_name":"鄉","zipcode":"883"}]},{"city":{"name":"金門縣","type_name":"直轄市"},"dists":[{"name":"金城鎮","type_name":"鎮","zipcode":"893"},{"name":"金湖鎮","type_name":"鎮","zipcode":"891"},{"name":"金沙鎮","type_name":"鎮","zipcode":"890"},{"name":"金寧鄉","type_name":"鄉","zipcode":"892"},{"name":"烈嶼鄉","type_name":"鄉","zipcode":"894"},{"name":"烏坵鄉","type_name":"鄉","zipcode":"896"}]},{"city":{"name":"連江縣","type_name":"直轄市"},"dists":[{"name":"南竿鄉","type_name":"鄉","zipcode":"209"},{"name":"北竿鄉","type_name":"鄉","zipcode":"210"},{"name":"莒光鄉","type_name":"鄉","zipcode":"211"},{"name":"東引鄉","type_name":"鄉","zipcode":"212"}]}];
Gaia5FPRO = {
  random_id: function() { return (Date.now() + Math.random()).toString().replace('.', '-') },
  html: function(random_id) { return '<div class="gaia-selects" id="gaia-selects-' + random_id + '" data-gaia-id="' + random_id + '"></div>' }
}
var random_id = Gaia5FPRO.random_id()
if(document.readyState != 'loading') {
  var parentNode = document.currentScript.parentNode
  var els = parentNode.getElementsByClassName('gaia-selects')
  if(els.length > 0) {
    parentNode.removeChild(els[0]);
  }
  var tmp = document.createElement('div');
  var lastTmp = document.createElement('div');
  tmp.innerHTML = Gaia5FPRO.html(random_id)
  parentNode.appendChild(lastTmp)
  parentNode.insertBefore(tmp.childNodes[0], document.currentScript.nextSibling)
  parentNode.removeChild(lastTmp)
} else {
  document.write(Gaia5FPRO.html(random_id))
}
Gaia5FPRO.load_selects = function(script) {
  var random_id = Gaia5FPRO.random_id();
  script.after(Gaia5FPRO.html(random_id))
  Gaia5FPRO.generate_selects(random_id)
}
Gaia5FPRO.generate_selects = function(random_id) {
  var selects = $('#gaia-selects-' + random_id);
  var city = $('<select>').attr('id', 'gaia-city-select-' + random_id)
  var dist = $('<select>').attr('id', 'gaia-dist-select-' + random_id)
  var zipcode = $('<input type="text">').attr('id', 'gaia-zipcode-' + random_id)

  var script = document.currentScript || selects.parent().find('script')[0];
  var params = {
    city_input: script.getAttribute('city-input') || 'city',
    dist_input: script.getAttribute('dist-input') || 'dist',
    zipcode_input: script.getAttribute('zipcode-input' || 'zipcode'),
    zipcode_value: script.getAttribute('zipcode-value' || ''),
    city_value: script.getAttribute('city-value' || ''),
    dist_value: script.getAttribute('dist-value' || ''),
    zipcode_prefix: script.getAttribute('zipcode-prefix'),
    disable_zipcode: script.getAttribute('disable-zipcode'),
    wrapper_tag: script.getAttribute('wrapper-tag') || 'div',
    wrapper_class: script.getAttribute('wrapper-class') || '',
    select_class: script.getAttribute('select-class') || '',
    input_class: script.getAttribute('input-class') || '',
    city_placeholder: script.getAttribute('city-placeholder') || '請選擇城市',
    dist_placeholder: script.getAttribute('dist-placeholder') || '請選擇鄉鎮區',
    zipcode_placeholder: script.getAttribute('zipcode-placeholder') || '郵遞區號',
    zipcode_front: script.getAttribute('zipcode-front') == 'true' || false

  }
  city.attr('name', params['city_input']);
  dist.attr('name', params['dist_input']);

  zipcode.attr('name', params['zipcode_input']);
  zipcode.attr('placeholder', params['zipcode_placeholder'])

  var selected_city = params['city_value'];
  var selected_dist = params['dist_value'];
  var zipcode_value = params['zipcode_value']
  var dist_name_with_zipcode = !(params['zipcode_prefix'] == 'false');
  var disable_zipcode_input = params['disable_zipcode'] == 'true'
  var wrapper_tag = params['wrapper_tag']
  var wrapper_class = params['wrapper_class']
  var input_class = params['input_class']
  var select_class = params['select_class']
  var city_zipcodes = {}

  city.addClass(select_class)
  dist.addClass(select_class)
  zipcode.addClass(input_class)

  // bind events
  city.on('change', function() {
    dist.trigger('reset');
    if(city.val() == '') return;
    var cell = data.filter(function(cell) { return cell.city.name == city.val(); })[0];
    cell.dists.forEach(function(dist_obj) {
      var text = dist_name_with_zipcode ? dist_obj.zipcode + ' ' + dist_obj.name : dist_obj.name;
      dist.append($('<option>', {
        'value': dist_obj.name,
        'text':  text
      }).attr('data-zipcode', dist_obj.zipcode));
    })
    if(city.attr('data-dist-value')) {
      dist.val(city.attr('data-dist-value'))
      dist.trigger('change')
      city.removeAttr('data-dist-value')
    }
  });

  dist.on('reset', function() {
    dist.html('<option value>' + params['dist_placeholder'] + '</option>')
  });

  dist.on('change', function() {
    if(disable_zipcode_input || dist.val() == '') return;
    var zipcode_value = dist.find(':selected').attr('data-zipcode');
    zipcode.val(zipcode_value);
  });

  // insert city select
  city.append('<option value>' + params['city_placeholder'] + '</option>')
  dist.trigger('reset');
  data.forEach(function(cell) {
    var city_name = cell.city.name;
    var selected = city_name == selected_city;
    city.append($('<option>', {
      'value': city_name,
      'text':  city_name,
      'selected': selected
    }));
    cell.dists.forEach(function(data_dist) {
      city_zipcodes[data_dist.zipcode] = { city: city_name, dist: data_dist.name }
    })
    // assign default value
    if(selected) {
      city.trigger('change');
      if(selected_dist != '') {
        dist.find('[value=' + selected_dist + ']').attr('selected', true);
        dist.trigger('change');
        if(zipcode_value != '' && zipcode_value != null) {
          zipcode.val(zipcode_value);
        }
      }
    }
  });
  zipcode.on('change', function() {
    tmp = city_zipcodes[zipcode.val()]
    if(tmp && tmp.city) {
      city.val(tmp.city)
      dist_value = tmp.dist
      if(dist_value) {
        city.attr('data-dist-value', dist_value)
      }
      city.trigger('change')
    }
  })

  zipcode_html = $('<' + wrapper_tag + '>').addClass(wrapper_class).addClass('gaia-zipcode').append(zipcode)
  if(!disable_zipcode_input && params['zipcode_front']) {
    selects.append(zipcode_html);
  }
  selects.append($('<' + wrapper_tag + '>').addClass(wrapper_class).addClass('gaia-cities').append(city));
  selects.append($('<' + wrapper_tag + '>').addClass(wrapper_class).addClass('gaia-dists').append(dist));
  if(!disable_zipcode_input && !params['zipcode_front']) {
    selects.append(zipcode_html);
  }
  $('#gaia-selects-' + random_id).parent().trigger('gaia-loaded')
}
var loadjQuery = function(random_id, callback){
  url = '//ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js'
  var script = document.createElement("script")
  script.type = "text/javascript";
  if (script.readyState){  //IE
    script.onreadystatechange = function(){
      if (script.readyState == "loaded" ||
          script.readyState == "complete"){
        script.onreadystatechange = null;
        callback(random_id);
      }
    };
  } else {  //Others
    script.onload = function(){
      callback(random_id);
    };
  }
  script.src = url;
  document.getElementsByTagName("head")[0].appendChild(script);
}
if(typeof(jQuery) == 'undefined') {
  loadjQuery(random_id, Gaia5FPRO.generate_selects);
} else {
  Gaia5FPRO.generate_selects(random_id);
}

